function f1() { }
function f2() { }
function f3() { }
function f4() { }
function f5() { }
function f6() { }

function f() {
    function g() {
        g.$closure.print = 0;
        print(g.$closure.print);
        print(10);
        ::print(20);
    }
    g();
    print(30);
}

f();

print("\n\n\n");

pi = 3.14159;
function Move(dx, dy) {
    x = x + dx;
    y = y + dy;
    print(::pi);
}

phi = 1;
function Print() {
    print(x, y);
    print(::phi);
}

function Point(x, y) {
    local pt = [
        { "x" : x },
        { "y" : y },
        { "move" : Move },
        { "print" : Print }
    ];

    pt.move.$closure = [
        { "$local" : pt },
        { "$outer" : Move.$closure }
    ];

    pt.print.$closure = [
        { "$local" : pt },
        { "$outer" : Print.$closure }
    ];

    return pt;
}

p1 = Point(1,1);
p1.move(10,21);
p1.print();

p2 = Point(0,0);
p2.move(30,30);
p2.print();